webpackJsonp([29],{rmsO:function(e,t){},snFU:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("lC5x"),i=r.n(a),l=r("J0Oq"),n=r.n(l),s=r("HzJ8"),o=r.n(s),m=r("WNVK"),c=r("0pcc"),u={inject:["reload"],data:function(){return{dialogVisible:!1,form:{itemNumber:"",itemName:"",taskNumber:"",taskName:"",planBeginTime:"",planEndTime:"",taskTime:"",planCheckTime:"",taskPriority:"",fatherNumber:"",hasChildren:!1},itemInfo:[],taskInfo:[],rules:{itemNumber:[{required:!0,message:"请选择项目编号",trigger:"change"}],itemName:[{required:!0,message:"请选择项目名称",trigger:"change"}],taskNumber:[{required:!0,message:"请输入任务编号",trigger:"blur"}],taskName:[{required:!0,message:"请输入任务名称",trigger:"blur"}],planBeginTime:[{required:!0,message:"请选择计划开始时间",trigger:"change"}],planEndTime:[{required:!0,message:"请选择计划完成时间",trigger:"change"}],taskTime:[{required:!0,message:"请输入工期",trigger:"blur"}],planCheckTime:[{required:!0,message:"请选择考核时间",trigger:"change"}],taskPriority:[{required:!0,message:"请选择计划优先级",trigger:"change"}],hasChildren:[{required:!0,message:"请选择是否为主节点",trigger:"change"}]},priorityInfo:[{priorityId:"1",priorityName:"Ⅰ级"},{priorityId:"2",priorityName:"Ⅱ级"},{priorityId:"3",priorityName:"Ⅲ级"}]}},methods:{getRole:function(e){var t=!0,r=!1,a=void 0;try{for(var i,l=o()(this.itemInfo);!(t=(i=l.next()).done);t=!0){var n=i.value;e===n.itemNumber&&(this.form.itemName=n.itemName)}}catch(e){r=!0,a=e}finally{try{!t&&l.return&&l.return()}finally{if(r)throw a}}},getList:function(e){var t=!0,r=!1,a=void 0;try{for(var i,l=o()(this.itemInfo);!(t=(i=l.next()).done);t=!0){var n=i.value;e===n.itemName&&(this.form.itemNumber=n.itemNumber)}}catch(e){r=!0,a=e}finally{try{!t&&l.return&&l.return()}finally{if(r)throw a}}},reset:function(e){this.$refs.form.clearValidate(["fatherNumber"]),this.form.fatherNumber=""},selectAll:function(){var e=this;return n()(i.a.mark(function t(){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.d)();case 2:r=t.sent,e.taskInfo=r.data;case 4:case"end":return t.stop()}},t,e)}))()},init:function(){this.dialogVisible=!0},onSubmit:function(e){var t,r=this;this.$refs[e].validate((t=n()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.next=3,Object(c.a)(r.form);case 3:r.$message.success("新建成功"),r.dialogVisible=!1,r.reload(),e.next=9;break;case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,r)})),function(e){return t.apply(this,arguments)}))},parent:function(){this.$parent.selectAll()},resetForm:function(e){this.$refs[e].resetFields(),this.dialogVisible=!1},closeDiv:function(e){this.$refs.form.resetFields(),e()},selectAllItemInfo:function(){var e=this;return n()(i.a.mark(function t(){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.n)();case 2:r=t.sent,e.itemInfo=r.data;case 4:case"end":return t.stop()}},t,e)}))()},selectAllTask:function(){var e=this;return n()(i.a.mark(function t(){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.d)();case 2:r=t.sent,e.taskInfo=r.data;case 4:case"end":return t.stop()}},t,e)}))()}},created:function(){this.selectAllItemInfo(),this.selectAllTask()}},f={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"addTaskInfo"},[r("el-dialog",{attrs:{title:"新建",visible:e.dialogVisible,width:"700px","before-close":e.closeDiv},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"form",attrs:{"label-position":"right",rules:e.rules,model:e.form,"label-width":"80px"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{staticStyle:{width:"320px"},attrs:{label:"项目编号：",prop:"itemNumber"}},[r("el-select",{staticStyle:{width:"225px"},on:{change:function(t){return e.getRole(t)}},model:{value:e.form.itemNumber,callback:function(t){e.$set(e.form,"itemNumber",t)},expression:"form.itemNumber"}},e._l(e.itemInfo,function(e){return r("el-option",{key:e.itemId,attrs:{label:e.itemNumber,value:e.itemNumber}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{staticStyle:{width:"320px"},attrs:{label:"项目名称：",prop:"itemName"}},[r("el-select",{staticStyle:{width:"225px"},on:{change:function(t){return e.getList(t)}},model:{value:e.form.itemName,callback:function(t){e.$set(e.form,"itemName",t)},expression:"form.itemName"}},e._l(e.itemInfo,function(e){return r("el-option",{key:e.itemId,attrs:{label:e.itemName,value:e.itemName}})}),1)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{staticStyle:{width:"320px"},attrs:{label:"任务编号：",prop:"taskNumber"}},[r("el-input",{model:{value:e.form.taskNumber,callback:function(t){e.$set(e.form,"taskNumber",t)},expression:"form.taskNumber"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{staticStyle:{width:"320px"},attrs:{label:"任务名称：",prop:"taskName"}},[r("el-input",{model:{value:e.form.taskName,callback:function(t){e.$set(e.form,"taskName",t)},expression:"form.taskName"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{staticStyle:{width:"320px"},attrs:{label:"计划开始：",prop:"planBeginTime"}},[r("el-date-picker",{staticStyle:{width:"225px"},attrs:{type:"datetime",placeholder:"请选择计划开始时间","default-time":"12:00:00"},model:{value:e.form.planBeginTime,callback:function(t){e.$set(e.form,"planBeginTime",t)},expression:"form.planBeginTime"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{staticStyle:{width:"320px"},attrs:{label:"计划完成：",prop:"planEndTime"}},[r("el-date-picker",{staticStyle:{width:"225px"},attrs:{type:"datetime",placeholder:"请选择计划完成时间","default-time":"12:00:00"},model:{value:e.form.planEndTime,callback:function(t){e.$set(e.form,"planEndTime",t)},expression:"form.planEndTime"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{staticStyle:{width:"320px"},attrs:{label:"工期(天)：",prop:"taskTime"}},[r("el-input",{model:{value:e.form.taskTime,callback:function(t){e.$set(e.form,"taskTime",t)},expression:"form.taskTime"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{staticStyle:{width:"320px"},attrs:{label:"考核时间：",prop:"planCheckTime"}},[r("el-date-picker",{staticStyle:{width:"225px"},attrs:{type:"datetime",placeholder:"请选择考核时间","default-time":"12:00:00"},model:{value:e.form.planCheckTime,callback:function(t){e.$set(e.form,"planCheckTime",t)},expression:"form.planCheckTime"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{staticStyle:{width:"320px"},attrs:{label:"优先级：",prop:"taskPriority"}},[r("el-select",{staticStyle:{width:"225px"},attrs:{placeholder:"请选择优先级"},model:{value:e.form.taskPriority,callback:function(t){e.$set(e.form,"taskPriority",t)},expression:"form.taskPriority"}},e._l(e.priorityInfo,function(e){return r("el-option",{key:e.priorityId,attrs:{label:e.priorityName,value:e.priorityName}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{staticStyle:{width:"320px"},attrs:{label:"主节点：",prop:"hasChildren"}},[r("el-radio",{attrs:{label:!0},on:{change:function(t){return e.reset(t)}},model:{value:e.form.hasChildren,callback:function(t){e.$set(e.form,"hasChildren",t)},expression:"form.hasChildren"}},[e._v("是")]),e._v(" "),r("el-radio",{attrs:{label:!1},model:{value:e.form.hasChildren,callback:function(t){e.$set(e.form,"hasChildren",t)},expression:"form.hasChildren"}},[e._v("否")])],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{staticStyle:{width:"320px"},attrs:{label:"父节点：",prop:"fatherNumber",rules:!1===this.form.hasChildren?[{required:!0,message:"请选择父节点，若无父节点请先创建主节点！",trigger:"change"}]:[]}},[r("el-select",{staticStyle:{width:"225px"},attrs:{placeholder:"请选择父节点编号",disabled:!1!==this.form.hasChildren},model:{value:e.form.fatherNumber,callback:function(t){e.$set(e.form,"fatherNumber",t)},expression:"form.fatherNumber"}},e._l(e.taskInfo,function(e){return r("el-option",{key:e.taskId,attrs:{label:e.taskNumber,value:e.taskNumber}})}),1)],1)],1)],1),e._v(" "),r("el-form-item",{staticStyle:{margin:"20px 0 0 170px"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("确认")]),e._v(" "),r("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var p=r("C7Lr")(u,f,!1,function(e){r("rmsO")},null,null);t.default=p.exports}});
//# sourceMappingURL=29.6a500d79646e0f8c414c.js.map